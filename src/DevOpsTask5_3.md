### Домашнее задание 5-3

# Задание 1
    Сценарий выполения задачи:

    создайте свой репозиторий на https://hub.docker.com;
    выберете любой образ, который содержит веб-сервер Nginx;
    создайте свой fork образа;
    реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:


# Решение 1
    https://hub.docker.com/layers/ledok/netology/latest/images/sha256-1103d3b3c51f9a0e6028803cf60665795ace368247725c48b828c48f27decce7?context=repo&tab=layers
    
    Вроде все верно сделал, но сомневаюсь.
    Как минимум после изменения дефолтного index.html я смог через wget localhost:80 получить измененное содержимое)


# Задание 2
    Посмотрите на сценарий ниже и ответьте на вопрос: "Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"
    
    Детально опишите и обоснуйте свой выбор.
    
    --
    
    Сценарий:
    
        Высоконагруженное монолитное java веб-приложение;
        Nodejs веб-приложение;
        Мобильное приложение c версиями для Android и iOS;
        Шина данных на базе Apache Kafka;
        Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
        Мониторинг-стек на базе Prometheus и Grafana;
        MongoDB, как основное хранилище данных для java-приложения;
        Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.

# Решение 2

        Высоконагруженное монолитное java веб-приложение;
            Тут однозначно физическая машина, так как разделить монолитное приложение не получится, а делать очень большой и нагруженный контейнер с характеристиками как у физического сервера не имеет смысла.

        Nodejs веб-приложение;
            Нагрузка на такое приложение скорее всего небольшая и ресурсов она потребует немного. Таким образом, docker контейнеры идеально подойдут, особенно учитывая, что можно разделить фронт, бэк и БД на разные контейнеры и их переиспользовать.

        Мобильное приложение c версиями для Android и iOS;
            Контейнеры Docker не только смогут быстро и с меньшими затратами организовать данный вариант, но и быстро и с меньшими затратами обеспечить окружение с различными версиями Android и iOS, так как для мобилок это критично.

        Шина данных на базе Apache Kafka;
            Так как для реализации шины данных Apache Kafka потребуется consumer, server и producer, то наверное было бы проще сделать это через Docker контейнеры или ВМ в зависимости от уровня нагрузки.

        Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
            Количество отдельных компонентов явно указывает, что организовать их проще через систему оркестрации контейнеров или ВМ. Но учитывая, что тут в основном логирование, а следовательно критична потеря данных, то я бы отдал предпочтение ВМ.

        Мониторинг-стек на базе Prometheus и Grafana;
            Мониторинг не так критичен к потере данных да и писать их можно в файлы на локалке, так что тут однозначно Docker так как максимально быстро и просто.

        MongoDB, как основное хранилище данных для java-приложения;
            В зависимости от критичности данных и её размеров выбрал бы ВМ или физический сервер.
            Небольшой объем некритичных данных дешевле разместить в кластере из ВМ, например тестовую БД.
            А большой объем и критичные данные конечно лучше на физическом сервере.

        Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.
            Однозначно физический сервер, так как будут храниться важные данные и скорее всего в больших объёмах. А для эффективных CI/CD процессов, то есть наименьшей затраты по времени, потребуется много физических ресурсов.

# Задание 3

    Запустите первый контейнер из образа centos c любым тэгом в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;
    Запустите второй контейнер из образа debian в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера;
    Подключитесь к первому контейнеру с помощью docker exec и создайте текстовый файл любого содержания в /data;
    Добавьте еще один файл в папку /data на хостовой машине;
    Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /data контейнера.


# Решение 3
root@slava-MS-7677:/home/slava/Documents/docker# docker run -dit --rm --name debian -v /home/slava/Documents/docker/data:/data debian bash
f1a5baa6cf6ea6fca6a56ed19fae0e8d76b00ae122bae9e1bcb5cf17e193149c
root@slava-MS-7677:/home/slava/Documents/docker# docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS         PORTS     NAMES
f1a5baa6cf6e   debian    "bash"    5 seconds ago   Up 3 seconds             debian
07750da3c79d   centos    "bash"    2 minutes ago   Up 2 minutes             centos
root@slava-MS-7677:/home/slava/Documents/docker# docker exec -it debian bash
root@f1a5baa6cf6e:/# ls
bin  boot  data  dev  etc  home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@f1a5baa6cf6e:/# cd data
root@f1a5baa6cf6e:/data# ls
centos_file  local_file
root@f1a5baa6cf6e:/data# 


# Задание 4

    Воспроизвести практическую часть лекции самостоятельно.
    
    Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.

# Решение 4

    https://hub.docker.com/repository/docker/ledok/ansible